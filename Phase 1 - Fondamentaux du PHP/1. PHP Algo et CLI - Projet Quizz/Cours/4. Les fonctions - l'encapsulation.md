# Les fonctions - L'encapsulation
Un fonction est un bloc d'instructions réutilisable qui en fonction de paramètres d'entrée, retourne une valeur de sortie. Les fonctions permettent de structurer le code, de le rendre plus lisible et de faciliter la réutilisation du code.

Vous avez déjà utiliser de nombreuses fonctions dans les cours précédents, comme `echo`, `print_r`, `var_dump`, `array_sum`, etc. Ces fonctions sont des fonctions prédéfinies de PHP.

Il est temps que vous créiez vos propres fonctions.

## Définition d'une fonction
**Une fonction est définie par son nom, ses paramètres et le type de sa valeur de retour.**

> La valeur de retour d'une fonction qui ne renvoie rien est `NULL`.

**Syntaxe :**
```php
function functionName(type param1, type param2, ...) : returnType{
    // Code
    return value;
}
```

**Exemple simple :**
```php
function Somme(float $a,float $b) : float{
    return $a+$b;
}

echo Somme(2,3) + Somme(4,5); // Affiche 14
// equivalent à echo 2+3 + 4+5;
```

**Exemple réel :**
```php
/***
 * Convertit un tableau en string
 * @param array $table : le tableau à convertir en string
 * @param string $separator : séparateur utilisé entre chaque élément du tableau, par défaut ","
 * @return string : la string qui contient tous les éléments du tableau.
 */
function arrayToString(array $table,string $separator = ",") : string{
    $joinedString = "";

    foreach($table as $key=>$value){
        $joinedString = $key==0 ? $joinedString.$value :$joinedString.$separator.$value;
    }

    return $joinedString;
}

echo arrayToString( ["J'ai",24,"ans"] ," ");      // => J'ai 24 ans
```
> Voir l'opérateur ternaire sur w3s : https://www.w3schools.com/php/php_operators.asp#ternary
> L'opérateur ternaire `? : ` est un `if`  qui renvoi une valeur en fonction d'une condition.

En PHP, si l'on précise le type d'un paramètre ou d'une valeur de retour et qu'une variable du mauvais type est passée, une erreur survient et le script s'arrête. On appelle cela le **typage fort** et c'est une bonne pratique de programmation pour éviter les erreurs inattendues. ***Typez toujours vos paramètres et vos valeurs de retour.***

> Note : `string $separator = ","`
> Le paramètre d'une fonction peut avoir une valeur par défaut, ce qui rend le paramètre optionnel.

## Exemple structure d'un programme simple

Voici une programme de caisse enregistreuse qui enrgistre dans un fichier les ventes d'un magasin. Il utilise des fonctions pour encapsuler la logique d'enregistrement dans le fichier pour rendre le code compréhensible et réutilisable.

```php

